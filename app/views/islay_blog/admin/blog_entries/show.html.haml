- sub_header('Blog Entries', path(:blog))
- sub_header(@blog_entry.title)

- sub_header_status do
  %ul#summary
    - if @blog_entry.published?
      %li.publish-state
        %span.key Status
        %span.indicator.ok Published
      %li.publish-date
        %span.key on
        %span.value.indicator.ok.time= @blog_entry.published_at
    - else
      %li
        %span.key Status
        %span.indicator Unpublished
    %li
      - if @blog_entry.comments.count == 0
        %span.value.indicator.neutral No comments
      - else
        %span.value.indicator.neutral= "#{@blog_entry.comments.count} Comment#{@blog_entry.comments.count > 1 ? 's' : ''}"

= content(:class => 'inset') do
  = column(6) do
    %h3 Body
    %div.body
      = render_markdown(@blog_entry.body, 4)

    %h3 Assets (images, etc.)

    %ul.assets
      - @blog_entry.images.each do |image|
        %li.asset-preview
          %div.frame= image_tag(image.previews.url(:thumb_medium))

  = column(6, :class => 'last') do
    %h3 Comments

    %ul.comments
      - @blog_entry.comments.each do |comment|
        %li
          %h4
            = comment.name
            \/
            = comment.email
          = link_to('Delete', path(:delete, comment), :class => 'button delete')
          = simple_format(sanitize(comment.body))
          %p
            Added on
            %span.time= comment.updated_at

= footer do
  = edit_button(@blog_entry)
  = delete_button(@blog_entry)
